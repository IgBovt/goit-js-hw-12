{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/loaders&buttons.js","../src/js/clearGallery.js","../src/js/backend-service.js","../src/js/createMarkup.js","../src/img/2.svg","../src/js/alert.js","../src/js/simpleLightBox.js","../src/main.js"],"sourcesContent":["export function getRefs() {\n  return {\n    form: document.querySelector('.js-form'),\n    btn: document.querySelector('.js-btn'),\n    container: document.querySelector('.js-gallery'),\n    span: document.querySelector('.js-loader'),\n    pagBtn: document.querySelector('.js-pag-btn'),\n    totalCount: document.querySelector('.js-count'),\n    textRequest: document.querySelector('.js-request'),\n    searchText: document.querySelector('.js-search-text'),\n  };\n}\n","import { getRefs } from './refs';\n\nconst refs = getRefs();\n\nexport function addLoader() {\n  return refs.span.classList.add('loader');\n}\nexport function removeLoader() {\n  return refs.span.classList.remove('loader');\n}\nexport function addPaginationBtn() {\n  refs.pagBtn.classList.add('btn-showed');\n}\n\nexport function removePaginationBtn() {\n  refs.pagBtn.classList.remove('btn-showed');\n}\nexport function addSearchText() {\n  refs.searchText.classList.add('is-showed');\n}\nexport function removeSearchText() {\n  refs.searchText.classList.remove('is-showed');\n}\n","import { getRefs } from './refs';\n\nexport function clearGallery() {\n  const refs = getRefs();\n  return (refs.container.innerHTML = '');\n}\n","import axios from 'axios';\n\nexport class PixabayAPI {\n  #BASE_URL = 'https://pixabay.com/api/';\n  #KEY = '41531809-f9219a766117007ff116a3463';\n\n  constructor() {\n    this.searchQuery = null;\n    this.page = 1;\n    this.itemCount = 40;\n    this.total = null;\n  }\n  async getPhoto() {\n    const response = await axios.get(`${this.#BASE_URL}`, {\n      params: {\n        q: this.searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        page: this.page,\n        per_page: this.itemCount,\n        key: this.#KEY,\n        safesearch: true,\n      },\n    });\n\n    const images = response.data;\n    this.incrementPage();\n    this.total = images.totalHits;\n    return images;\n  }\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  resetTotal() {\n    this.total = null;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import { getRefs } from './refs';\nimport { addSearchText } from './loaders&buttons';\n\nexport function createMarkup(images) {\n  const refs = getRefs();\n  const markup = images.hits\n    .map(\n      img =>\n        `   <li class=\"item\">\n            <a class=\"link\" href=\"${img.largeImageURL}\">\n            <img\n                class=\"img\"\n                src=\"${img.webformatURL}\"\n                alt=\"${img.tags}\"\n                width=\"360\"\n                height=\"200\"\n                loading=\"lazy\"\n            />\n            <div class=\"text-bar\">\n                <div class=\"text-container\">\n                <h3 class=\"text-title\">Likes</h3>\n                <p class=\"text\">${img.likes}</p>\n                </div>\n                <div class=\"text-container\">\n                <h3 class=\"text-title\">Views</h3>\n                <p class=\"text\">${img.views}</p>\n                </div>\n                <div class=\"text-container\">\n                <h3 class=\"text-title\">Comments</h3>\n                <p class=\"text\">${img.comments}</p>\n                </div>\n                <div class=\"text-container\">\n                <h3 class=\"text-title\">Downloads</h3>\n                <p class=\"text\">${img.downloads}</p>\n                </div>\n            </div> </a\n            >\n            </li>`\n    )\n    .join('');\n  refs.container.insertAdjacentHTML('beforeend', markup);\n  addSearchText();\n}\n","export default \"__VITE_ASSET__0c0e52e8__\"","import err from '../img/2.svg';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function getAlert() {\n  return iziToast.warning({\n    backgroundColor: '#EF4040',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    iconUrl: `${err}`,\n    position: 'topRight',\n    title: 'SORRY',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nexport function getErrorAlert() {\n  return iziToast.warning({\n    backgroundColor: '#EF4040',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    iconUrl: `${err}`,\n    position: 'center',\n    title: 'ERROR',\n    message: 'SERVER REQUEST IS WRONG',\n  });\n}\n\nexport function getWarningAlert() {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'You forgot important data',\n    position: 'center',\n  });\n}\n\nexport function getInfoAlert() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function initializeLightbox() {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n","import { getRefs } from './js/refs';\nimport {\n  addLoader,\n  removeLoader,\n  addPaginationBtn,\n  removePaginationBtn,\n  removeSearchText,\n} from './js/loaders&buttons';\nimport { clearGallery } from './js/clearGallery';\nimport { PixabayAPI } from './js/backend-service';\nimport { createMarkup } from './js/createMarkup';\nimport {\n  getAlert,\n  getWarningAlert,\n  getInfoAlert,\n  getErrorAlert,\n} from './js/alert';\nimport { initializeLightbox } from './js/simpleLightBox';\n\nconst refs = getRefs();\nconst pixabayAPI = new PixabayAPI();\nrefs.form.addEventListener('submit', onSearch);\nrefs.pagBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  removePaginationBtn();\n  removeSearchText();\n  addLoader();\n  clearGallery();\n  pixabayAPI.resetPage();\n  pixabayAPI.resetTotal();\n  pixabayAPI.query = e.currentTarget.elements.delay.value.trim();\n\n  if (pixabayAPI.query === '') {\n    return (\n      getWarningAlert(),\n      removeLoader(),\n      removePaginationBtn(),\n      removeSearchText()\n    );\n  }\n  makeGallery();\n  e.currentTarget.reset();\n}\n\nfunction onLoadMore() {\n  addLoader();\n  makeGallery();\n}\n\nasync function makeGallery() {\n  try {\n    createMarkup(await pixabayAPI.getPhoto());\n    removeLoader();\n    initializeLightbox();\n    refs.textRequest.textContent = `\"${pixabayAPI.searchQuery}\"`;\n    refs.totalCount.textContent = `\"${pixabayAPI.total}\"`;\n\n    if (pixabayAPI.total > 40) {\n      addPaginationBtn();\n    }\n    if (refs.container.childElementCount <= 0) {\n      getAlert();\n    }\n    if (\n      (pixabayAPI.page - 1) * 40 >= pixabayAPI.total &&\n      refs.container.childElementCount > 1 &&\n      pixabayAPI.page > 2\n    ) {\n      removePaginationBtn();\n      getInfoAlert();\n    }\n    if (pixabayAPI.page > 2) {\n      window.scrollBy({\n        top:\n          refs.container.firstElementChild.getBoundingClientRect().height * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch {\n    getErrorAlert();\n  }\n}\n"],"names":["getRefs","refs","addLoader","removeLoader","addPaginationBtn","removePaginationBtn","addSearchText","removeSearchText","clearGallery","PixabayAPI","__privateAdd","_BASE_URL","_KEY","images","axios","__privateGet","newQuery","createMarkup","markup","img","err","getAlert","iziToast","getErrorAlert","getWarningAlert","getInfoAlert","initializeLightbox","SimpleLightbox","pixabayAPI","onSearch","onLoadMore","makeGallery"],"mappings":"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"}